/* 侧边导航栏样式 */
.side-nav {
  width: 64px;
  height: 100vh;
  background: var(--sidebar-bg, rgba(0, 0, 0, 0.3));
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 0;
  transition: all 0.3s ease;
  overflow: hidden; /* 修改为hidden，防止出现外部滚动条 */
  isolation: isolate; /* 创建新的层叠上下文 */
  z-index: 110;
  flex-shrink: 0;
  position: fixed;
  left: 0;
  top: 0;
  box-sizing: border-box;
  border-radius: 0 12px 12px 0; /* 右侧圆角 */
  box-shadow: var(--sidebar-shadow);
}

/* 为阴影添加额外空间 */
.side-nav::after {
  content: '';
  position: absolute;
  right: -12px; /* 等于圆角半径 */
  top: 0;
  bottom: 0;
  width: 12px;
  background: inherit;
  z-index: -1; /* 置于主体后方 */
}

/* 添加内部容器以处理滚动 */
.side-nav-content {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-y: auto; /* 只在内部容器保留滚动 */
  overflow-x: hidden; /* 修改为hidden，避免水平滚动条 */
  padding: 0 5px; /* 内部容器的内边距 */
  box-sizing: border-box;
  border-radius: 0 12px 12px 0; /* 右侧圆角 */
  background: inherit; /* 继承外部容器背景 */
}

/* 确保展开状态下保持圆角 */
.side-nav.expanded {
  width: 200px;
  align-items: flex-start;
  padding-left: 20px;
  padding-right: 20px;
  border-radius: 0 12px 12px 0; /* 保持右侧圆角 */
}

.side-nav.expanded .side-nav-content {
  padding: 0 15px;
  align-items: flex-start;
}

/* 导航栏Logo样式 - 修改为不可点击但保留视觉效果 */
.nav-logo {
  display: flex;
  align-items: center;
  margin-bottom: 30px;
  width: 100%;
  padding: 8px 0;
  border-radius: 8px;
  justify-content: center;
  transition: all 0.3s;
  cursor: default; /* 改为默认光标，表明不可点击 */
}

.side-nav.expanded .nav-logo {
  justify-content: flex-start;
}

/* 保留悬停效果视觉效果 */
.nav-logo:hover {
  background-color: var(--hover-color, rgba(255, 255, 255, 0.1));
}

.nav-logo .el-icon {
  font-size: 24px;
}

.nav-text {
  margin-left: 12px;
  font-weight: bold;
  opacity: 0;
  white-space: nowrap;
  transition: opacity 0.3s;
  display: none;
}

.side-nav.expanded .nav-text {
  opacity: 1;
  display: inline;
}

/* 导航项容器 */
.nav-items {
  display: flex;
  flex-direction: column;
  width: 100%;
  flex: 1;
  gap: 8px;
  overflow: visible; /* 移除滚动，由父容器.side-nav-content控制滚动 */
  padding: 5px 0;
}

/* 导航项样式 */
.nav-item {
  display: flex;
  align-items: center;
  padding: 12px 0;
  cursor: pointer;
  width: 100%;
  justify-content: center;
  border-radius: 8px;
  color: var(--el-text-color-regular);
  transition: all 0.3s;
  position: relative;
}

.nav-item:hover {
  background-color: var(--hover-color, rgba(255, 255, 255, 0.1));
  color: var(--el-text-color-primary);
}

.nav-item.active {
  background-color: var(--active-color, rgba(255, 255, 255, 0.15));
  color: var(--el-color-primary);
}

.side-nav.expanded .nav-item {
  justify-content: flex-start;
  padding-left: 15px;
}

.nav-item .el-icon {
  font-size: 20px;
}

/* 底部控制区样式 */
.nav-bottom {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 0;
  cursor: pointer;
  width: 100%;
  margin-top: auto; /* 推到底部 */
  border-radius: 8px;
  transition: all 0.3s;
  flex-shrink: 0; /* 防止被压缩 */
  margin-bottom: 10px; /* 底部间距 */
}

.side-nav.expanded .nav-bottom {
  justify-content: flex-start;
  padding-left: 15px;
}

.nav-bottom:hover {
  background-color: var(--hover-color, rgba(255, 255, 255, 0.1));
}

/* 深色模式适配 */
:deep(.dark-mode) .side-nav {
  background-color: rgba(0, 0, 0, 0.5);
  border-right-color: rgba(255, 255, 255, 0.05);
}

:deep(.dark-mode) .nav-item.active {
  background: rgba(255, 255, 255, 0.15);
}

/* 响应式调整 */
@media (max-width: 768px) {
  .side-nav {
    width: 64px !important;
  }
  
  .nav-text {
    display: none !important;
    opacity: 0 !important;
  }
  
  .side-nav.expanded {
    padding-left: 0;
    padding-right: 0;
    align-items: center;
  }
  
  .nav-item, .nav-bottom {
    justify-content: center !important;
    padding-left: 0 !important;
  }
}
